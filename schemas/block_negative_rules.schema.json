{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Stage14 BLOCK Negative Rules",
  "$comment": "Stage 15: BLOCK Non-Interference. This schema is strict by design: no tunability, no learning inputs, no override mechanisms, no empathy/optimization coupling. BLOCK is policy law.",
  "type": "object",
  "required": [
    "spec",
    "governance",
    "prohibitions"
  ],
  "additionalProperties": false,
  "properties": {
    "spec": {
      "type": "object",
      "required": [
        "stage",
        "name",
        "non_tunable"
      ],
      "additionalProperties": false,
      "properties": {
        "stage": {
          "type": "integer",
          "const": 14
        },
        "name": {
          "type": "string"
        },
        "version": {
          "type": [
            "string",
            "integer"
          ]
        },
        "non_tunable": {
          "type": "boolean",
          "const": true
        }
      }
    },
    "governance": {
      "type": "object",
      "description": "Stage 15: BLOCK policy law governance header. Immutable; must not be influenced by learning, empathy, or optimization subsystems.",
      "required": [
        "law_class",
        "tunable",
        "learnable",
        "override_allowed",
        "source_of_truth",
        "stage_freeze_tag"
      ],
      "additionalProperties": false,
      "properties": {
        "law_class": {
          "const": "BLOCK_POLICY_LAW"
        },
        "tunable": {
          "const": false
        },
        "learnable": {
          "const": false
        },
        "override_allowed": {
          "const": false
        },
        "source_of_truth": {
          "const": "FROZEN_TABLES_ONLY"
        },
        "stage_freeze_tag": {
          "type": "string"
        }
      }
    },
    "prohibitions": {
      "type": "array",
      "minItems": 1,
      "items": {
        "type": "object",
        "required": [
          "code",
          "description"
        ],
        "additionalProperties": false,
        "properties": {
          "code": {
            "type": "string",
            "minLength": 1
          },
          "description": {
            "type": "string",
            "minLength": 1
          }
        },
        "not": {
          "anyOf": [
            {
              "required": [
                "weight"
              ]
            },
            {
              "required": [
                "weights"
              ]
            },
            {
              "required": [
                "threshold"
              ]
            },
            {
              "required": [
                "thresholds"
              ]
            },
            {
              "required": [
                "tunable"
              ]
            },
            {
              "required": [
                "override"
              ]
            },
            {
              "required": [
                "override_allowed"
              ]
            },
            {
              "required": [
                "model_confidence"
              ]
            },
            {
              "required": [
                "expected_value"
              ]
            },
            {
              "required": [
                "cost_benefit"
              ]
            },
            {
              "required": [
                "empathy_weight"
              ]
            },
            {
              "required": [
                "bse_weight"
              ]
            },
            {
              "required": [
                "learn_from_outcomes"
              ]
            }
          ]
        }
      }
    }
  },
  "not": {
    "anyOf": [
      {
        "required": [
          "weights"
        ]
      },
      {
        "required": [
          "thresholds"
        ]
      },
      {
        "required": [
          "override"
        ]
      },
      {
        "required": [
          "learn_from_outcomes"
        ]
      },
      {
        "required": [
          "empathy_weight"
        ]
      },
      {
        "required": [
          "expected_value"
        ]
      }
    ]
  }
}