{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Stage14 Action Gating Table",
  "$comment": "Stage 15: BLOCK Non-Interference. This schema is strict by design: no tunability, no learning inputs, no override mechanisms, no empathy/optimization coupling. BLOCK is policy law.",
  "type": "object",
  "required": [
    "spec",
    "governance",
    "rows"
  ],
  "additionalProperties": false,
  "properties": {
    "spec": {
      "type": "object",
      "required": [
        "stage",
        "name"
      ],
      "additionalProperties": false,
      "properties": {
        "stage": {
          "type": "integer",
          "const": 14
        },
        "name": {
          "type": "string"
        },
        "version": {
          "type": [
            "string",
            "integer"
          ]
        }
      }
    },
    "governance": {
      "type": "object",
      "description": "Stage 15: BLOCK policy law governance header. Immutable; must not be influenced by learning, empathy, or optimization subsystems.",
      "required": [
        "law_class",
        "tunable",
        "learnable",
        "override_allowed",
        "source_of_truth",
        "stage_freeze_tag"
      ],
      "additionalProperties": false,
      "properties": {
        "law_class": {
          "const": "BLOCK_POLICY_LAW"
        },
        "tunable": {
          "const": false
        },
        "learnable": {
          "const": false
        },
        "override_allowed": {
          "const": false
        },
        "source_of_truth": {
          "const": "FROZEN_TABLES_ONLY"
        },
        "stage_freeze_tag": {
          "type": "string"
        }
      }
    },
    "rows": {
      "type": "array",
      "minItems": 1,
      "items": {
        "type": "object",
        "required": [
          "constraint_status",
          "harm_profile",
          "judgment_integrity",
          "action"
        ],
        "additionalProperties": false,
        "properties": {
          "constraint_status": {
            "type": "string",
            "enum": [
              "NONE",
              "SOFT",
              "HARD"
            ]
          },
          "harm_profile": {
            "type": "string",
            "enum": [
              "LOW",
              "MEDIUM",
              "HIGH"
            ]
          },
          "judgment_integrity": {
            "type": "string",
            "enum": [
              "INTACT",
              "DEGRADED",
              "COMPROMISED"
            ]
          },
          "action": {
            "type": "string",
            "enum": [
              "ALLOW",
              "BLOCK"
            ]
          }
        },
        "not": {
          "anyOf": [
            {
              "required": [
                "weight"
              ]
            },
            {
              "required": [
                "weights"
              ]
            },
            {
              "required": [
                "threshold"
              ]
            },
            {
              "required": [
                "thresholds"
              ]
            },
            {
              "required": [
                "tunable"
              ]
            },
            {
              "required": [
                "override"
              ]
            },
            {
              "required": [
                "override_allowed"
              ]
            },
            {
              "required": [
                "model_confidence"
              ]
            },
            {
              "required": [
                "expected_value"
              ]
            },
            {
              "required": [
                "cost_benefit"
              ]
            },
            {
              "required": [
                "empathy_weight"
              ]
            },
            {
              "required": [
                "bse_weight"
              ]
            },
            {
              "required": [
                "learn_from_outcomes"
              ]
            }
          ]
        }
      }
    }
  },
  "not": {
    "anyOf": [
      {
        "required": [
          "weights"
        ]
      },
      {
        "required": [
          "thresholds"
        ]
      },
      {
        "required": [
          "override"
        ]
      },
      {
        "required": [
          "learn_from_outcomes"
        ]
      },
      {
        "required": [
          "empathy_weight"
        ]
      },
      {
        "required": [
          "expected_value"
        ]
      }
    ]
  }
}